{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\Programming\\\\GoIT\\\\Team Projects\\\\slim-mom\\\\frontend\\\\slim-mom-app\\\\src\\\\components\\\\AuthForm\\\\AuthForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { logIn, register } from \"../../redux/auth/authOperations\";\nimport { useAuth } from \"../../hooks/useAuth\";\nimport css from \"./AuthForm.module.css\";\nimport { NavLink } from \"react-router-dom\";\nimport { TextField } from \"../TextField/TextField\";\nimport { Loader } from \"../Loader/Loader\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AuthForm = ({\n  header,\n  fields,\n  buttonText,\n  footerText,\n  footerLink,\n  isLogin\n}) => {\n  _s();\n  const {\n    isRefreshing\n  } = useAuth();\n  const [formData, setFormData] = useState({});\n  // const [showPassword, setShowPassword] = useState(false);\n  const [message, setMessage] = useState(null);\n  const dispatch = useDispatch();\n  const [isValid, setIsValid] = useState(null);\n\n  // Handle Password Validation\n  const validatePassword = (e, field) => {\n    setMessage(\"\");\n    if (field === \"password\" && !isLogin) {\n      const valid = e.target.value.length >= 8;\n      setIsValid(e.target.value.length === 0 ? null : valid);\n      setMessage(valid ? \"Password is secure.\" : \"Password must be at least 8 characters long.\");\n    }\n  };\n  const handleChange = (e, field) => {\n    setFormData({\n      ...formData,\n      [field]: e.target.value\n    });\n    validatePassword(e, field);\n  };\n\n  // Handle Submit\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (isLogin) {\n        await dispatch(logIn(formData)).unwrap();\n      } else {\n        await dispatch(register(formData)).unwrap();\n      }\n    } catch (err) {\n      setIsValid(false);\n      if (err.status === 409) {\n        setMessage(\"Account already exists.\");\n      } else if (err.status === 403) {\n        setMessage(\"Invalid email or password.\");\n      } else {\n        setMessage(`${err.message || \"An error has occurred.\"}`);\n      }\n      clearPasswordField();\n    }\n  };\n  const clearPasswordField = () => {\n    setFormData(prevData => ({\n      ...prevData,\n      password: \"\"\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: css.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: css.header,\n      children: header\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: css.form,\n      children: [fields.map((field, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"relative\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          type: field.type,\n          className: field.type === \"password\" && isValid !== null ? isValid ? css.valid : css.invalid : \"\",\n          label: field.placeholder,\n          value: formData[field.name] || \"\",\n          onChange: e => handleChange(e, field.name),\n          id: field.name,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), field.type === \"password\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: css.message,\n            style: {\n              color: isValid ? \"var(--mint-green)\" : \"var(--red)\"\n            },\n            children: [\" \", message]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }, this)\n        }, void 0, false) : null]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: css.actionButtons,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"primary-button\",\n          style: {\n            width: isRefreshing ? \"170px\" : null\n          },\n          children: isRefreshing ? isLogin ? \"Signing in...\" : \"Signing up...\" : buttonText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), isRefreshing && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 28\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"secondary\",\n          children: /*#__PURE__*/_jsxDEV(NavLink, {\n            to: footerLink,\n            style: {\n              textDecoration: \"none\",\n              color: \"inherit\"\n            },\n            children: footerText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthForm, \"kSsrTMBEePxmDYJcRYCayD9eS8w=\", false, function () {\n  return [useAuth, useDispatch];\n});\n_c = AuthForm;\nvar _c;\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"names":["React","useState","useDispatch","logIn","register","useAuth","css","NavLink","TextField","Loader","jsxDEV","_jsxDEV","Fragment","_Fragment","AuthForm","header","fields","buttonText","footerText","footerLink","isLogin","_s","isRefreshing","formData","setFormData","message","setMessage","dispatch","isValid","setIsValid","validatePassword","e","field","valid","target","value","length","handleChange","handleSubmit","preventDefault","unwrap","err","status","clearPasswordField","prevData","password","className","container","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","form","map","index","style","position","type","invalid","label","placeholder","name","onChange","id","required","color","actionButtons","width","to","textDecoration","_c","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/Programming/GoIT/Team Projects/slim-mom/frontend/slim-mom-app/src/components/AuthForm/AuthForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { logIn, register } from \"../../redux/auth/authOperations\";\r\nimport { useAuth } from \"../../hooks/useAuth\";\r\nimport css from \"./AuthForm.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { TextField } from \"../TextField/TextField\";\r\nimport { Loader } from \"../Loader/Loader\";\r\n\r\nexport const AuthForm = ({\r\n  header,\r\n  fields,\r\n  buttonText,\r\n  footerText,\r\n  footerLink,\r\n  isLogin,\r\n}) => {\r\n  const { isRefreshing } = useAuth();\r\n  const [formData, setFormData] = useState({});\r\n  // const [showPassword, setShowPassword] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n  const dispatch = useDispatch();\r\n  const [isValid, setIsValid] = useState(null);\r\n\r\n  // Handle Password Validation\r\n  const validatePassword = (e, field) => {\r\n    setMessage(\"\");\r\n\r\n    if (field === \"password\" && !isLogin) {\r\n      const valid = e.target.value.length >= 8;\r\n      setIsValid(e.target.value.length === 0 ? null : valid);\r\n      setMessage(\r\n        valid\r\n          ? \"Password is secure.\"\r\n          : \"Password must be at least 8 characters long.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleChange = (e, field) => {\r\n    setFormData({\r\n      ...formData,\r\n      [field]: e.target.value,\r\n    });\r\n    validatePassword(e, field);\r\n  };\r\n\r\n  // Handle Submit\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      if (isLogin) {\r\n        await dispatch(logIn(formData)).unwrap();\r\n      } else {\r\n        await dispatch(register(formData)).unwrap();\r\n      }\r\n    } catch (err) {\r\n      setIsValid(false);\r\n\r\n      if (err.status === 409) {\r\n        setMessage(\"Account already exists.\");\r\n      } else if (err.status === 403) {\r\n        setMessage(\"Invalid email or password.\");\r\n      } else {\r\n        setMessage(`${err.message || \"An error has occurred.\"}`);\r\n      }\r\n      clearPasswordField();\r\n    }\r\n  };\r\n\r\n  const clearPasswordField = () => {\r\n    setFormData((prevData) => ({\r\n      ...prevData,\r\n      password: \"\",\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className={css.container}>\r\n      <h1 className={css.header}>{header}</h1>\r\n      <form onSubmit={handleSubmit} className={css.form}>\r\n        {fields.map((field, index) => (\r\n          <div key={index} style={{ position: \"relative\" }}>\r\n            <TextField\r\n              type={field.type}\r\n              className={\r\n                field.type === \"password\" && isValid !== null\r\n                  ? isValid\r\n                    ? css.valid\r\n                    : css.invalid\r\n                  : \"\"\r\n              }\r\n              label={field.placeholder}\r\n              value={formData[field.name] || \"\"}\r\n              onChange={(e) => handleChange(e, field.name)}\r\n              id={field.name}\r\n              required\r\n            />\r\n            {field.type === \"password\" ? (\r\n              <>\r\n                <p\r\n                  className={css.message}\r\n                  style={{\r\n                    color: isValid ? \"var(--mint-green)\" : \"var(--red)\",\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  {message}\r\n                </p>\r\n              </>\r\n            ) : null}\r\n          </div>\r\n        ))}\r\n\r\n        <div className={css.actionButtons}>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"primary-button\"\r\n            style={{ width: isRefreshing ? \"170px\" : null }}\r\n          >\r\n            {isRefreshing\r\n              ? isLogin\r\n                ? \"Signing in...\"\r\n                : \"Signing up...\"\r\n              : buttonText}\r\n          </button>\r\n          {isRefreshing && <Loader />}\r\n\r\n          <button className=\"secondary\">\r\n            <NavLink\r\n              to={footerLink}\r\n              style={{ textDecoration: \"none\", color: \"inherit\" }}\r\n            >\r\n              {footerText}\r\n            </NavLink>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}